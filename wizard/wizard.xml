<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="add-module" name="roma-aspect-view-echo2-wizard">

	<import file="../../roma-core-wizard/wizard/base-wizard.xml" />

	<target name="add-module">
		<echo>Adding 'Web configuration' on project's web.xml -></echo>
		<xmltask source="${project.path}/.classpath" dest="${project.path}/.classpath" preservetype="true" expandEntityReferences="false">
			<remove path="/classpath/classpathentry[@path='lib/servlet-api.jar']" />
			<insert path="/classpath/classpathentry[last()]" position="after">
				<![CDATA[<classpathentry kind="lib" path="lib/servlet-api.jar"/>]]>
      </insert>
		</xmltask>

		<xmltask source="${project.path}/WebContent/WEB-INF/web.xml" dest="${project.path}/WebContent/WEB-INF/web.xml" preservetype="true" expandEntityReferences="false">
			<remove path="/web-app/listener[@listener-class='org.romaframework.aspect.session.echo2.HttpSessionCatcher']" />
			<insert path="/web-app/display-name" position="after" file="web.xml" />
		</xmltask>

		<!-- COPY SOURCES -->
		<echo>Adding sources -></echo>
		<copy todir="${project.path}/${project.src}/${project.package-path}/">
			<fileset dir=".">
				<include name="CustomApplicationConfiguration.java" />
			</fileset>
			<filterset>
				<filter token="project.package" value="${project.package}" />
			</filterset>
		</copy>
		<copy todir="${project.path}/${project.src}/${project.package-path}/view/domain/">
			<fileset dir=".">
				<include name="HomePage.java" />
			</fileset>
			<filterset>
				<filter token="project.package" value="${project.package}" />
			</filterset>
		</copy>
		<copy todir="${project.path}/${project.src}/${project.package-path}/view/domain/screen/">
			<fileset dir=".">
				<include name="main-screen.xml" />
			</fileset>
			<filterset>
				<filter token="project.package" value="${project.package}" />
			</filterset>
		</copy>

		<!-- COPY IMAGES -->
		<copy todir="${project.path}/${project.src}/${project.package-path}/view/image">
			<fileset dir="image">
				<include name="*" />
			</fileset>
		</copy>
	</target>

</project>
